### 2019.03.26 关于定时发送短信

关于定时发送短信的相关问题：

寻找发送短信的相关服务商，比如阿里云、腾讯云，新用户会有一个月9.9元这样的套餐，短信有效期为一个月

申请短信签名，短信签名申请方式包括公司申请和个人申请，个人申请可以选择个人网站相关信息(这样短信才可以发送短信通知和验证码，如果单纯只是个人，短信只能发送验证码) 

而且申请有个大坑，阿里云后台会查看你提交的网站信息，看看是否有备案，以及网站是否能够正常访问，如果正常访问不了，会驳回申请（之前由于服务器配置问题，导致网站在某一些情况下不能够正常访问，结果阿里云给出的驳回理由是让上传身份证正反面信息，联系了两次客服才知道是网站不能访问这个原因... ）

短信签名就是 【阿里云公司】这种东西

然后要申请短信模板，之前一直以为短信是可以随便发送的，后边才知道有这么多条条框框限制，比如申请模板单个变量不能超过20个字，超过75个字是另一个收费逻辑，变量必须声明清楚是时间日期 还是 电话号码 等类型

在申请短信签名和短信模板，至少被驳回了10多次，前提是对着文档，按照规范来申请的，结果还是各种各样的驳回理由，搞到没脾气

发送短信可以选择在后台管理系统发送和调用API发送，选择后者的Node.jsAPI，安装依赖包@alicloud/pop-core

接口请求参数包括发送内容、变量名、模板id、签名code等等一些列内容，只要按照规则填好就好，另外，如果短信发送不成功，看看返回的参数，对照文档找到问题所在

定时发送服务，node-schedule这个库便可实现，注意，获取当前日期这些逻辑放到定时函数里边执行，不然时间就是代码执行那一天的日期

OK，主要内容便是这样，感兴趣可以去看看，挺有趣